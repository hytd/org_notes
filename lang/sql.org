* mysql

** question

*数据库中的事务是什么*

#+BEGIN_QUOTE
事务 是作为一个逻辑单元执行的一系列操作，一个逻辑工作单元必须有四个属性，称为 ACID (原子性 一致性 隔离性 持久性)
#+END_QUOTE

- 原子性 事务 必须是原子工作单元，对其数据修改，要么全部执行，要不全部不执行

- 一致性 事务 在完成时，必须使所有的数据都保持一致状态。在数据库中，所有规则都必须应用于事务的修改，以保持所有数据的完整性 事务 结束时，所有的内部数据（如B树索引或双向链表）都必须是正确的

- 隔离性 由 并发事务 所作的修改必须与任何其他 并发事务 所做的修改隔离 事务 查看数据时数据所处的状态，要么是另一 并发事务 修改它之前的状态，要么是另一 事务 修改它之后的状态 事务 不会查看中间状态的数据。这称为 可串行性 因为它能够重新装载起始数据，并且重播一系列 事务 以使数据结束时状态与 原始事务 执行的状态相同

- 持久性 事务 完成之后，它对于系统的影响是永久性的。该修改即使出现系统故障也将一直保持

*mysql取得当前时间的函数*

#+BEGIN_QUOTE
NOW() 该函数返回当前系统的日期和时间 在mysql shell 中输入 select now();
#+END_QUOTE

*mysql格式化日期的函数*

#+BEGIN_QUOTE
DATE_FORMAT(date, format) DATE_FORMAT(NOW(), '%Y %m %%d')
#+END_QUOTE

*如何查看sql语句执行时间*

#+BEGIN_QUOTE
explain
#+END_QUOTE

*请给出sql语句优化的几种方案*

- 尽量选择较小的列

- 将 where 中用的比较频繁的字段建立索引

- select 子句中避免使用 *

- 避免在索引例上使用计算 not in < > 等操作

- 当只需要一行数据的时候使用 limit 1

- 保证单表数据不超过200w，适时分割表

*MyISAM和InnoDB的区别*

- 构成上，MyISAM 的表在磁盘中有三个文件组成，分别是 表定义文件(.frm) 数据文件(.MYD) 索引文件(.MYI) 而 InnoDB 的表由 表定义文件(.frm) 表空间数据和日志文件组成

- 安全方面 MyISAM 强调的是性能，其查询效率较高，但不支持事务和外键等安全性能方面的功能，而 InnoDB 支持事务和外键等高级功能，查询效率稍低

- 对锁的支持 MyISAM 支持表锁，而 InnoDB 支持行锁

*数据库索引分几类，分别是什么*

| 主索引 | 唯一索引 | 普通索引 | 全文索引 |

*什么时候使用索引*

#+BEGIN_QUOTE
并非所有的数据库都以相同的方式使用索引，作为通用规则，只有当经常查询列中的数据时，才需要在表上创建索引
#+END_QUOTE

*索引的目的是什么*

- 快速访问数据表中特定的信息，提高检索速度

- 创建唯一索引，保证数据库表中每一行数据的唯一性

- 加速表与表之间的连接

- 使用分组和排序子句进行数据检索时，可以显著减少查询分组和排序的时间

*为数据表建立索引的原则有哪些*

- 在最频繁使用的，用以缩小查询范围的字段上建立索引

- 在频繁使用的，需要排序的字段上建立索引

*索引对数据库负面的影响是什么*

- 创建索引维护索引需要消耗时间，这个时间随着数据量的增加而增加

- 索引需要占用物理空间，不光是表需要占用物理空间，每个索引也需要占用物理空间

- 当对表进行 增 删 改 查 的时候索引也需要动态的维护，这样就降低了数据的维护速度

*什么情况下不宜建立索引*

- 对于查询中很少涉及的列或者重复值比较多的列，不宜建立索引

- 对于一些特殊的据哭类型，不宜建立索引，比如文本字段等
